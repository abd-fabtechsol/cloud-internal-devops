{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport apiClient from '../api/apiClient';\nconst initialState = {\n  token: null,\n  userType: null,\n  isLoggedIn: false,\n  user: null\n};\nexport const authSlice = createSlice({\n  name: \"counterSlice\",\n  initialState,\n  reducers: {\n    login: (state, _ref) => {\n      let {\n        payload\n      } = _ref;\n      console.log(payload.token);\n      state.token = payload.token;\n      state.userType = payload.userType;\n      state.isLoggedIn = true;\n    },\n    logout: state => {\n      state.token = null;\n      state.isLoggedIn = false;\n      state.user = null;\n    },\n    setUser: (state, _ref2) => {\n      let {\n        payload\n      } = _ref2;\n      state.user = payload; // Set the user data from the action payload\n    }\n  }\n});\n\nexport const fetchUser = () => async dispatch => {\n  try {\n    const {\n      data\n    } = await apiClient.get('/user/user-info');\n    // console.log(data);\n\n    if (data) {\n      dispatch(authSlice.actions.setUser(data === null || data === void 0 ? void 0 : data.result)); // Dispatch the action to set the user data\n    }\n  } catch (e) {\n    console.e(\"Error fetching user data:\", e);\n  }\n};\n\n// Action creators are generated for each case reducer function\nexport const {\n  login,\n  logout\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","apiClient","initialState","token","userType","isLoggedIn","user","authSlice","name","reducers","login","state","_ref","payload","console","log","logout","setUser","_ref2","fetchUser","dispatch","data","get","actions","result","e","reducer"],"sources":["/Users/fabtest/Documents/project/isentcare-main/src/redux/counterSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport apiClient from '../api/apiClient';\n\nconst initialState = {\n   token :null,\n   userType : null,\n   isLoggedIn : false,\n   user : null,\n};\n\nexport const authSlice = createSlice({\n  name: \"counterSlice\",\n  initialState,\n  reducers: {\n  \n    login: (state, {payload}) => {\n      console.log(payload.token)\n      state.token = payload.token;\n      state.userType=payload.userType\n      state.isLoggedIn=true\n    },\n    logout: (state) => {\n        state.token = null;\n        state.isLoggedIn=false;\n        state.user = null\n    },\n \n    setUser: (state, {payload}) => {\n      state.user = payload; // Set the user data from the action payload\n    },\n\n  }\n});\n\n\nexport const fetchUser = () => async (dispatch) => {\n  try {\n    const {data} = await apiClient.get('/user/user-info')\n    // console.log(data);\n    \n    if (data) {\n      dispatch(authSlice.actions.setUser(data?.result)); // Dispatch the action to set the user data\n    }\n  } catch (e) {\n    console.e(\"Error fetching user data:\", e);\n  }\n};\n\n// Action creators are generated for each case reducer function\nexport const {\nlogin,\nlogout\n} = authSlice.actions;\n\nexport default authSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,SAAS,MAAM,kBAAkB;AAExC,MAAMC,YAAY,GAAG;EAClBC,KAAK,EAAE,IAAI;EACXC,QAAQ,EAAG,IAAI;EACfC,UAAU,EAAG,KAAK;EAClBC,IAAI,EAAG;AACV,CAAC;AAED,OAAO,MAAMC,SAAS,GAAGP,WAAW,CAAC;EACnCQ,IAAI,EAAE,cAAc;EACpBN,YAAY;EACZO,QAAQ,EAAE;IAERC,KAAK,EAAEA,CAACC,KAAK,EAAAC,IAAA,KAAgB;MAAA,IAAd;QAACC;MAAO,CAAC,GAAAD,IAAA;MACtBE,OAAO,CAACC,GAAG,CAACF,OAAO,CAACV,KAAK,CAAC;MAC1BQ,KAAK,CAACR,KAAK,GAAGU,OAAO,CAACV,KAAK;MAC3BQ,KAAK,CAACP,QAAQ,GAACS,OAAO,CAACT,QAAQ;MAC/BO,KAAK,CAACN,UAAU,GAAC,IAAI;IACvB,CAAC;IACDW,MAAM,EAAGL,KAAK,IAAK;MACfA,KAAK,CAACR,KAAK,GAAG,IAAI;MAClBQ,KAAK,CAACN,UAAU,GAAC,KAAK;MACtBM,KAAK,CAACL,IAAI,GAAG,IAAI;IACrB,CAAC;IAEDW,OAAO,EAAEA,CAACN,KAAK,EAAAO,KAAA,KAAgB;MAAA,IAAd;QAACL;MAAO,CAAC,GAAAK,KAAA;MACxBP,KAAK,CAACL,IAAI,GAAGO,OAAO,CAAC,CAAC;IACxB;EAEF;AACF,CAAC,CAAC;;AAGF,OAAO,MAAMM,SAAS,GAAGA,CAAA,KAAM,MAAOC,QAAQ,IAAK;EACjD,IAAI;IACF,MAAM;MAACC;IAAI,CAAC,GAAG,MAAMpB,SAAS,CAACqB,GAAG,CAAC,iBAAiB,CAAC;IACrD;;IAEA,IAAID,IAAI,EAAE;MACRD,QAAQ,CAACb,SAAS,CAACgB,OAAO,CAACN,OAAO,CAACI,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,MAAM,CAAC,CAAC,CAAC,CAAC;IACrD;EACF,CAAC,CAAC,OAAOC,CAAC,EAAE;IACVX,OAAO,CAACW,CAAC,CAAC,2BAA2B,EAAEA,CAAC,CAAC;EAC3C;AACF,CAAC;;AAED;AACA,OAAO,MAAM;EACbf,KAAK;EACLM;AACA,CAAC,GAAGT,SAAS,CAACgB,OAAO;AAErB,eAAehB,SAAS,CAACmB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}