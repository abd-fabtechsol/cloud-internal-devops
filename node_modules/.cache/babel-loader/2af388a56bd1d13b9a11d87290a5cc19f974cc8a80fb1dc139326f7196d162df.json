{"ast":null,"code":"import { create } from \"apisauce\";\nimport { store } from \"../redux/store\";\nimport { logout } from \"../redux/counterSlice\";\nconst baseURL = \"https://worried-leggings-bull.cyclic.app/api\";\nconst apiClient = create({\n  baseURL: baseURL\n});\napiClient.addRequestTransform(request => {\n  var _store$getState, _store$getState$auth;\n  const authToken = store === null || store === void 0 ? void 0 : (_store$getState = store.getState()) === null || _store$getState === void 0 ? void 0 : (_store$getState$auth = _store$getState.auth) === null || _store$getState$auth === void 0 ? void 0 : _store$getState$auth.token;\n  if (!authToken) return;\n  request.headers.authorization = \"Bearer \" + authToken;\n});\napiClient === null || apiClient === void 0 ? void 0 : apiClient.addResponseTransform(response => {\n  // Handle response errors\n  if (response.status === 401) {\n    var _store$getState2, _store$getState2$auth;\n    if (store !== null && store !== void 0 && (_store$getState2 = store.getState()) !== null && _store$getState2 !== void 0 && (_store$getState2$auth = _store$getState2.auth) !== null && _store$getState2$auth !== void 0 && _store$getState2$auth.token) {\n\n      //   store.dispatch(logout())\n    }\n  } else if (response.status === 403) {\n    // toast.error('Restricted Route!!');\n  }\n});\nfunction setAuthToken(token) {\n  apiClient.setHeader(\"authorization\", `Bearer ${token}`);\n}\nexport { setAuthToken };\nexport default apiClient;","map":{"version":3,"names":["create","store","logout","baseURL","apiClient","addRequestTransform","request","_store$getState","_store$getState$auth","authToken","getState","auth","token","headers","authorization","addResponseTransform","response","status","_store$getState2","_store$getState2$auth","setAuthToken","setHeader"],"sources":["/Users/fabtest/Documents/project/isentcare-main/src/api/apiClient.js"],"sourcesContent":["import { create } from \"apisauce\";\nimport { store } from \"../redux/store\";\nimport { logout } from \"../redux/counterSlice\";\nconst baseURL =\"https://worried-leggings-bull.cyclic.app/api\";\nconst apiClient = create({\n  baseURL:baseURL ,\n});\n\napiClient.addRequestTransform(request => {\n  const authToken = store?.getState()?.auth?.token\n  if (!authToken) return;\n  request.headers.authorization = \"Bearer \" + authToken;\n});\n\napiClient?.addResponseTransform((response) => {\n  // Handle response errors\n  if (response.status === 401) {\n    if(store?.getState()?.auth?.token){\n\n    //   store.dispatch(logout())\n    }\n\n  } else if (response.status === 403) {\n    // toast.error('Restricted Route!!');\n  }\n});\n\nfunction setAuthToken(token) {\n  apiClient.setHeader(\"authorization\", `Bearer ${token}`);\n}\n\nexport { setAuthToken };\nexport default apiClient;"],"mappings":"AAAA,SAASA,MAAM,QAAQ,UAAU;AACjC,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,MAAMC,OAAO,GAAE,8CAA8C;AAC7D,MAAMC,SAAS,GAAGJ,MAAM,CAAC;EACvBG,OAAO,EAACA;AACV,CAAC,CAAC;AAEFC,SAAS,CAACC,mBAAmB,CAACC,OAAO,IAAI;EAAA,IAAAC,eAAA,EAAAC,oBAAA;EACvC,MAAMC,SAAS,GAAGR,KAAK,aAALA,KAAK,wBAAAM,eAAA,GAALN,KAAK,CAAES,QAAQ,EAAE,cAAAH,eAAA,wBAAAC,oBAAA,GAAjBD,eAAA,CAAmBI,IAAI,cAAAH,oBAAA,uBAAvBA,oBAAA,CAAyBI,KAAK;EAChD,IAAI,CAACH,SAAS,EAAE;EAChBH,OAAO,CAACO,OAAO,CAACC,aAAa,GAAG,SAAS,GAAGL,SAAS;AACvD,CAAC,CAAC;AAEFL,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEW,oBAAoB,CAAEC,QAAQ,IAAK;EAC5C;EACA,IAAIA,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IAAA,IAAAC,gBAAA,EAAAC,qBAAA;IAC3B,IAAGlB,KAAK,aAALA,KAAK,gBAAAiB,gBAAA,GAALjB,KAAK,CAAES,QAAQ,EAAE,cAAAQ,gBAAA,gBAAAC,qBAAA,GAAjBD,gBAAA,CAAmBP,IAAI,cAAAQ,qBAAA,eAAvBA,qBAAA,CAAyBP,KAAK,EAAC;;MAElC;IAAA;EAGF,CAAC,MAAM,IAAII,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IAClC;EAAA;AAEJ,CAAC,CAAC;AAEF,SAASG,YAAYA,CAACR,KAAK,EAAE;EAC3BR,SAAS,CAACiB,SAAS,CAAC,eAAe,EAAG,UAAST,KAAM,EAAC,CAAC;AACzD;AAEA,SAASQ,YAAY;AACrB,eAAehB,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}